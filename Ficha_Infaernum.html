<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha Infærnum - Edição Apocalíptica</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=Special+Elite&display=swap');

        :root {
            --paper-color: #f4e4bc;
            --ink-color: #2b2b2b;
            --blood-color: #8a0303;
            --line-color: #a89f81;
        }

        body {
            background-color: #222;
            font-family: 'Courier Prime', monospace;
            display: flex;
            justify-content: center;
            padding: 20px;
            margin: 0;
            color: var(--ink-color);
        }

        .sheet-container {
            background-color: var(--paper-color);
            width: 100%;
            max-width: 800px;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            background-image: url('https://www.transparenttextures.com/patterns/aged-paper.png');
            position: relative;
            border: 1px solid #d4c5a3;
        }

        /* Efeito de papel amassado/borda */
        .sheet-container::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            box-shadow: inset 0 0 100px rgba(87, 68, 29, 0.1);
            pointer-events: none;
            z-index: 0;
        }

        h1, h2, h3 {
            font-family: 'Special Elite', cursive;
            text-transform: uppercase;
            text-align: center;
            border-bottom: 2px solid var(--ink-color);
            padding-bottom: 5px;
            margin-top: 5px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 30px;
            letter-spacing: 2px;
        }

        .section {
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
            text-transform: uppercase;
            font-size: 0.9em;
        }

        input[type="text"], textarea, input[type="number"] {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 1px dashed var(--ink-color);
            font-family: 'Courier Prime', monospace;
            font-size: 1.1em;
            color: var(--ink-color);
            padding: 5px;
            outline: none;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus, textarea:focus {
            border-bottom: 1px solid var(--blood-color);
            background-color: rgba(255,255,255,0.2);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            line-height: 1.5em;
            background-image: linear-gradient(transparent 1.4em, var(--line-color) 1.5em);
            background-size: 100% 1.5em;
            background-attachment: local;
        }

        .row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .col {
            flex: 1;
            min-width: 250px;
        }

        /* Estilo da Mochila/Tralhas */
        .inventory-list {
            list-style: none;
            padding: 0;
        }

        .inventory-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            border-bottom: 1px dotted var(--line-color);
        }

        .inventory-item input[type="text"] {
            border: none;
            flex-grow: 1;
        }

        .inventory-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: 10px;
            font-size: 0.8em;
        }

        .consumable-check {
            accent-color: var(--blood-color);
            transform: scale(1.2);
            cursor: pointer;
        }

        /* Checkboxes de Desgraça */
        .doom-track {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .doom-checkbox {
            display: none;
        }

        .doom-label {
            width: 40px;
            height: 40px;
            border: 2px solid var(--ink-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Special Elite', cursive;
        }

        .doom-checkbox:checked + .doom-label {
            background-color: var(--blood-color);
            color: #fff;
            border-color: var(--blood-color);
            content: "X";
        }
        
        .doom-checkbox:checked + .doom-label::after {
            content: "☠";
        }

        /* Botões */
        .btn-add {
            background: transparent;
            border: 2px solid var(--ink-color);
            padding: 5px 15px;
            font-family: 'Special Elite', cursive;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.2s;
        }

        .btn-add:hover {
            background-color: var(--ink-color);
            color: var(--paper-color);
        }

        .btn-remove {
            background: none;
            border: none;
            color: var(--blood-color);
            font-weight: bold;
            cursor: pointer;
            font-size: 1.2em;
        }

        .info-box {
            border: 2px solid var(--ink-color);
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }

        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.8em;
            opacity: 0.7;
        }

    </style>
</head>
<body>

<div class="sheet-container">
    <h1>INFÆRNUM</h1>
    
    <div class="section">
        <label>Quem é você? (Nome e Conceito)</label>
        <input type="text" id="char_name" placeholder="Ex: Caim, um velho botânico que..." oninput="saveData()">
    </div>

    <div class="row">
        <div class="col">
            <div class="section">
                <label>Sorte (Melhor que a média)</label>
                <textarea id="char_luck" placeholder="Ex: Encontrar caminhos..." oninput="saveData()"></textarea>
            </div>
        </div>
        <div class="col">
            <div class="section">
                <label>Azar (Pior que a média)</label>
                <textarea id="char_badluck" placeholder="Ex: Lidar com o oculto..." oninput="saveData()"></textarea>
            </div>
        </div>
    </div>

    <div class="section">
        <label>Sua Bênção</label>
        <input type="text" id="char_blessing" placeholder="Algo único ou mágico..." oninput="saveData()">
    </div>

    <div class="section info-box">
        <h2>Desgraças</h2>
        <p style="font-size: 0.8em; margin-top:-10px;">(Ao marcar a 6ª, um Cavaleiro aparece)</p>
        <div class="doom-track">
            <input type="checkbox" id="doom1" class="doom-checkbox" onchange="saveData()"><label for="doom1" class="doom-label"></label>
            <input type="checkbox" id="doom2" class="doom-checkbox" onchange="saveData()"><label for="doom2" class="doom-label"></label>
            <input type="checkbox" id="doom3" class="doom-checkbox" onchange="saveData()"><label for="doom3" class="doom-label"></label>
            <input type="checkbox" id="doom4" class="doom-checkbox" onchange="saveData()"><label for="doom4" class="doom-label"></label>
            <input type="checkbox" id="doom5" class="doom-checkbox" onchange="saveData()"><label for="doom5" class="doom-label"></label>
            <input type="checkbox" id="doom6" class="doom-checkbox" onchange="saveData()"><label for="doom6" class="doom-label"></label>
        </div>
    </div>

    <div class="section">
        <label>Tormentos & Maldições</label>
        <textarea id="char_torments" placeholder="Ferimentos, dores e consequências das desgraças..." oninput="saveData()"></textarea>
    </div>

    <div class="section">
        <h2>Tralhas & Mochila</h2>
        <div style="display: flex; justify-content: space-between; font-size: 0.8em; margin-bottom: 5px; font-weight: bold;">
            <span>Item</span>
            <span style="margin-right: 40px;">Consumível?</span>
        </div>
        <ul id="inventoryList" class="inventory-list">
            </ul>
        <button class="btn-add" onclick="addItem()">+ Adicionar Item</button>
    </div>

    <div class="row">
        <div class="col">
            <div class="section info-box">
                <label>Almas Absorvidas</label>
                <input type="number" id="char_souls" value="0" style="text-align: center; font-size: 2em; border:none;" oninput="saveData()">
            </div>
        </div>
        <div class="col">
            <div class="section info-box">
                <label>Presságios (Dia)</label>
                <input type="number" id="char_omens" value="0" style="text-align: center; font-size: 2em; border:none;" oninput="saveData()">
            </div>
        </div>
    </div>

    <div class="section">
        <label>Anotações do Apocalipse</label>
        <textarea id="char_notes" style="min-height: 150px;" placeholder="Diário, pistas da Terra Prometida, nomes..." oninput="saveData()"></textarea>
    </div>

    <div class="footer">
        Ficha não oficial para uso pessoal | Baseada em Infærnum RPG
        <br>
        <button onclick="clearData()" style="margin-top:10px; background:none; border:none; color:#8a0303; cursor:pointer; font-size:0.8em;">(Limpar Ficha / Resetar)</button>
    </div>
</div>

<script>
    // Função para adicionar item na lista
    function addItem(text = "", isConsumable = false) {
        const list = document.getElementById("inventoryList");
        const li = document.createElement("li");
        li.className = "inventory-item";

        li.innerHTML = `
            <input type="text" placeholder="Nome do item..." value="${text}" oninput="saveData()">
            <div class="inventory-controls">
                <input type="checkbox" class="consumable-check" ${isConsumable ? 'checked' : ''} onchange="saveData()" title="Marcar se o item foi consumido ou gasto">
                <button class="btn-remove" onclick="removeItem(this)">×</button>
            </div>
        `;
        list.appendChild(li);
        saveData();
    }

    function removeItem(btn) {
        btn.closest("li").remove();
        saveData();
    }

    // Salvar dados no LocalStorage
    function saveData() {
        const data = {
            name: document.getElementById("char_name").value,
            luck: document.getElementById("char_luck").value,
            badluck: document.getElementById("char_badluck").value,
            blessing: document.getElementById("char_blessing").value,
            torments: document.getElementById("char_torments").value,
            souls: document.getElementById("char_souls").value,
            omens: document.getElementById("char_omens").value,
            notes: document.getElementById("char_notes").value,
            dooms: [
                document.getElementById("doom1").checked,
                document.getElementById("doom2").checked,
                document.getElementById("doom3").checked,
                document.getElementById("doom4").checked,
                document.getElementById("doom5").checked,
                document.getElementById("doom6").checked
            ],
            inventory: []
        };

        // Salvar inventário
        document.querySelectorAll(".inventory-item").forEach(item => {
            data.inventory.push({
                text: item.querySelector("input[type='text']").value,
                isConsumable: item.querySelector(".consumable-check").checked
            });
        });

        localStorage.setItem("infaernum_sheet_data", JSON.stringify(data));
    }

    // Carregar dados ao iniciar
    function loadData() {
        const saved = localStorage.getItem("infaernum_sheet_data");
        if (saved) {
            const data = JSON.parse(saved);
            document.getElementById("char_name").value = data.name || "";
            document.getElementById("char_luck").value = data.luck || "";
            document.getElementById("char_badluck").value = data.badluck || "";
            document.getElementById("char_blessing").value = data.blessing || "";
            document.getElementById("char_torments").value = data.torments || "";
            document.getElementById("char_souls").value = data.souls || 0;
            document.getElementById("char_omens").value = data.omens || 0;
            document.getElementById("char_notes").value = data.notes || "";

            if (data.dooms) {
                document.getElementById("doom1").checked = data.dooms[0];
                document.getElementById("doom2").checked = data.dooms[1];
                document.getElementById("doom3").checked = data.dooms[2];
                document.getElementById("doom4").checked = data.dooms[3];
                document.getElementById("doom5").checked = data.dooms[4];
                document.getElementById("doom6").checked = data.dooms[5];
            }

            if (data.inventory && data.inventory.length > 0) {
                data.inventory.forEach(item => addItem(item.text, item.isConsumable));
            } else {
                // Adicionar 3 linhas vazias padrão se não houver nada
                addItem();
                addItem();
                addItem();
            }
        } else {
            // Inicializar com 3 linhas de item se for novo
            addItem();
            addItem();
            addItem();
        }
    }

    function clearData() {
        if(confirm("Tem certeza que deseja apagar todos os dados da ficha?")) {
            localStorage.removeItem("infaernum_sheet_data");
            location.reload();
        }
    }

    window.onload = loadData;
</script>

</body>
</html>